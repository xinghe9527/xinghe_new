# 项目创作流 - 测试指南

## 🧪 快速测试流程

### 准备工作
1. 启动应用：`flutter run`
2. 进入"创作空间"标签页
3. 确认能看到"创建作品"按钮

---

## 📋 测试用例

### 测试1：进入工作流
**步骤**:
1. 点击"创建作品"按钮
2. 在弹窗中输入作品名称："测试项目"
3. 点击"开始创作"

**预期结果**:
- ✅ 弹出全屏工作流页面
- ✅ 顶部显示项目名称"测试项目"
- ✅ 显示4步骤导航条，第1步高亮
- ✅ 第1步内容区域显示空状态

---

### 测试2：AI生成剧本
**步骤**:
1. 在第1步的输入框中输入："赛博朋克世界的冒险故事"
2. 点击"AI生成"按钮

**预期结果**:
- ✅ 按钮变灰，顶部显示加载动画
- ✅ 等待2秒后显示5行中文剧本
- ✅ 每行显示：序号、类型标签（动作/对白）、内容、AI提示词
- ✅ 每行显示"上下文记忆已激活"绿色标签

**检查内容**:
- 剧本内容是否为中文
- 类型标签颜色是否正确（动作=青绿，对白=蓝色）
- AI提示词是否显示

---

### 测试3：编辑剧本
**步骤**:
1. 点击任意剧本行的"编辑"按钮
2. 修改内容和类型
3. 点击"保存"

**预期结果**:
- ✅ 弹出编辑对话框
- ✅ 可以修改内容和选择类型
- ✅ 保存后更新显示

---

### 测试4：插入剧本行
**步骤**:
1. 点击任意两行之间的"插入一行 / AI扩写"按钮
2. 等待AI扩写

**预期结果**:
- ✅ 显示加载状态（1.5秒）
- ✅ 在指定位置插入新的剧本行
- ✅ 序号自动更新

---

### 测试5：提取实体
**步骤**:
1. 点击"下一步"进入第2步
2. 点击"从剧本提取"按钮

**预期结果**:
- ✅ 加载2秒后显示3个实体卡片
- ✅ 包含：主角（角色）、未来都市（场景）、主角公寓（场景）
- ✅ 每个卡片显示类型图标、名称、锁定开关、固定描述框

---

### 测试6：锁定实体
**步骤**:
1. 在第2步中，点击"主角"卡片的锁定开关
2. 在固定描述框输入："银发，红瞳，黑色外套"

**预期结果**:
- ✅ 开关变为绿色，显示"已锁定"
- ✅ 卡片边框变为绿色
- ✅ 显示"锁定生效"标签
- ✅ 文本框内容实时保存

---

### 测试7：生成分镜
**步骤**:
1. 点击"下一步"进入第3步
2. 点击第一个分镜的"生成图片"按钮

**预期结果**:
- ✅ 加载3秒（模拟图片生成）
- ✅ 显示占位符图片（来自 picsum.photos）
- ✅ 提示词区域显示拼接后的完整提示词
- ✅ 按钮变为"确认分镜"和"重新生成"

---

### 测试8：批量生成分镜
**步骤**:
1. 在第3步顶部点击"批量生成全部"

**预期结果**:
- ✅ 为所有剧本行生成分镜
- ✅ 依次显示加载状态
- ✅ 所有分镜显示图片

---

### 测试9：确认分镜
**步骤**:
1. 点击任意分镜的"确认分镜"按钮

**预期结果**:
- ✅ 卡片边框变为绿色
- ✅ 右上角显示"✓ 已确认"标签

---

### 测试10：文生视频
**步骤**:
1. 点击"下一步"进入第4步
2. 点击"文生视频"模式卡片

**预期结果**:
- ✅ 加载5秒
- ✅ 显示"✓ 已完成"标签
- ✅ Mock视频URL保存到数据中

---

### 测试11：图生视频
**步骤**:
1. 点击"图生视频"模式卡片

**预期结果**:
- ✅ 使用分镜图作为参考生成视频
- ✅ 加载5秒后完成

---

### 测试12：首尾帧控制
**步骤**:
1. 点击"首尾帧控制"模式卡片
2. 查看弹出的对话框

**预期结果**:
- ✅ 弹出首尾帧选择对话框
- ✅ 左侧显示"起始帧"，自动填入分镜图
- ✅ 右侧显示"结束帧（可选）"，可点击上传
- ✅ 中间显示箭头图标

**扩展测试**:
3. 点击结束帧区域
4. 选择一张图片

**预期结果**:
- ✅ 文件选择器打开
- ✅ 选择后显示图片预览
- ✅ 点击"生成视频"开始生成

---

### 测试13：步骤导航
**步骤**:
1. 在第4步时，点击导航条的"第2步"
2. 修改某个实体的描述
3. 再点击"第4步"返回

**预期结果**:
- ✅ 可以自由跳转步骤
- ✅ 数据保持不丢失
- ✅ 已完成步骤显示✓标记

---

### 测试14：错误处理
**步骤**:
1. 在第1步不输入主题，直接点击"AI生成"

**预期结果**:
- ✅ 显示Toast提示："请输入主题"

---

### 测试15：完成工作流
**步骤**:
1. 完成所有步骤
2. 在第4步点击底部的"完成"按钮

**预期结果**:
- ✅ 关闭工作流页面
- ✅ 返回创作空间
- ✅ 创作空间显示新增的作品卡片
- ✅ 作品卡片标题为之前输入的项目名称

---

### 测试16：取消工作流
**步骤**:
1. 创建新作品并进入工作流
2. 点击左上角的"返回"按钮

**预期结果**:
- ✅ 返回创作空间
- ✅ 作品列表没有新增项（因为未完成）

---

## 🔍 详细检查项

### UI样式检查
- [ ] 深色主题正确应用
- [ ] 按钮渐变效果正常
- [ ] 卡片阴影正确显示
- [ ] 文字颜色符合设计规范
- [ ] 圆角半径一致

### 功能检查
- [ ] 所有按钮可点击
- [ ] 加载状态正确显示
- [ ] 错误提示正确显示
- [ ] 数据实时更新
- [ ] 页面切换流畅

### 性能检查
- [ ] 列表滚动流畅
- [ ] 图片加载不卡顿
- [ ] 内存占用正常
- [ ] 无明显卡顿

### 中文检查
- [ ] 所有UI文字为中文
- [ ] AI生成的内容为中文
- [ ] 提示信息为中文
- [ ] 按钮标签为中文

---

## 🐛 已知问题

### Mock数据限制
- 图片使用占位符服务（picsum.photos）
- 视频URL为示例URL，无法实际播放
- AI生成内容为固定模板

### 待实现功能
- 真实API接入
- 图片/视频上传到服务器
- 项目数据持久化到数据库
- 视频播放器
- 导出功能

---

## 📊 测试报告模板

```
测试日期：____________________
测试人员：____________________
设备信息：____________________

测试结果：
- 测试1：✅ / ❌
- 测试2：✅ / ❌
- 测试3：✅ / ❌
...

发现的问题：
1. ________________________________
2. ________________________________
3. ________________________________

建议改进：
1. ________________________________
2. ________________________________
3. ________________________________

总体评价：____________________
```

---

## 🚀 下一步

完成测试后：
1. 记录所有发现的问题
2. 确认核心功能正常工作
3. 准备接入真实AI API
4. 优化用户体验细节
5. 添加更多交互反馈

---

**测试版本**: v1.0.0  
**最后更新**: 2026-01-28  
**测试状态**: 🧪 准备测试
